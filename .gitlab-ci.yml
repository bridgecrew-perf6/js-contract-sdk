image: "node:16-slim"

stages:
 - publish

before_script:
  - apt-get update && apt-get install git -y

publish:
 stage: publish
 script:
    - echo "//registry.npmjs.org/:_authToken=${NPM_TOKEN}" > .npmrc
    - yarn
    - yarn publish --new-version ${VERSION}
 tags:
   - wavesenterprise
 only:
   variables:
     - $RELEASE == "yes"
